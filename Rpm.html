<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Umdrehungen pro Minute</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.bundle.min.js"></script>

    <style>
        p {
            display: inline;
        }
    </style>
    <div id="top">
        <div id="actionbar">

            <!-- changed the name of actionbar -->
            <a href="ConditionMonitoring.html"> <img src="arrow.png" alt="pfeil"
                    style="width:50px;height:30px;vertical-align :middle; "></a>
            <p>Home / Condition Monotoring / Rpm</p>

        </div>
    </div>
    <!-- the drop down menu -->
    </div>

    <div class="menu">
        <button class="dropDown">Historie</button>
        <div class="Content">
            <a href="history.html">Temperatur</a>
            <a href="Akustik.html">Akustik</a>
            <a href="Vibration.html">Vibration</a>
            <a href="Qualitaet.html">Qualit√§t</a>
            <a href="#">Rpm</a>
        </div>
    </div>

    <div class="chart-container" style="position: relative; height:40vh; width:80vw">
        <canvas id="canvas"></canvas>
    </div>
</head>

<body>
    <script>
        // variable, which saves link to the website
        //const url = 'http://it2wi1.if-lab.de/rest/mpr_fall1';
        //const url = 'http://it2wi1.if-lab.de/rest/mpr_fall2';
        const url = 'http://it2wi1.if-lab.de/rest/mpr_fall3';
        //const url = 'http://it2wi1.if-lab.de/rest/mpr_fall4';

        async function getDaten5() {

            const response = await fetch(url);
            var auf2 = await response.json();

            // Create an array of Datum
            var labels = auf2.map(function (e) {
                return e.datum;
            });

            var vibration = auf2.map(function (e) {
                return e.werte.Rpm;
            });

        

            let newVals3 = vibration.map(dots => dots.toString().replace(',', '.'))


        

            var chartObject = document.getElementById('canvas');
            var chart3 = new Chart(chartObject, {
                type: 'bar',
                data: {
                    labels: labels,  // Date Array 
                    datasets: [{
                        label: "Umdrehungen pro Minute",
                        backgroundColor: 'rgba(65,105,225,0.4)', // I changed this to an array for the changeColor function below
                        borderColor: 'rgba(65,105,255,1)',
                        data: newVals3  // Vibration Array
                    },  ]
                },
                options: {
                    title: {
                        display: true,
                        text: 'Umdrehungen pro Minute',

                    },
                    scales: {
                        yAxes: [{
                            scaleLabel: {
                                //ticks: {beginAtZero: true},
                                display: true,
                                labelString: 'rpm'
                            }
                        }]
                    }
                }
            });

        }
        getDaten5();
    </script>
</body>

</html>
